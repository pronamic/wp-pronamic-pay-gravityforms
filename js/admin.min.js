!function(r){function e(e){var i=this,n=r(e),t={},a=(t.gravityForm=n.find("#gf_ideal_gravity_form"),t.subscriptionAmountType=n.find('input[name="_pronamic_pay_gf_subscription_amount_type"]'),t.subscriptionIntervalType=n.find('input[name="_pronamic_pay_gf_subscription_interval_type"]'),t.subscriptionInterval=n.find("#pronamic_pay_gf_subscription_interval"),t.subscriptionIntervalPeriod=n.find("#pronamic_pay_gf_subscription_interval_period"),t.subscriptionIntervalDateType=n.find('input[name="_pronamic_pay_gf_subscription_interval_date_type"]'),t.subscriptionIntervalDate=n.find("#pronamic_pay_gf_subscription_interval_date"),t.subscriptionIntervalDateDay=n.find("#pronamic_pay_gf_subscription_interval_date_day"),t.subscriptionIntervalDateMonth=n.find("#pronamic_pay_gf_subscription_interval_date_month"),t.subscriptionFrequencyType=n.find('input[name="_pronamic_pay_gf_subscription_frequency_type"]'),t.subscriptionNumberPeriods=n.find("#pronamic_pay_gf_subscription_number_periods"),t.subscriptionTrialEnabled=n.find("#pronamic_pay_gf_subscription_trial_enabled"),JSON.parse(t.gravityForm.val()));this.getInputs=function(){var e=[];return a&&r.each(a.fields,function(i,n){n.inputs?r.each(n.inputs,function(i,n){e.push(n)}):n.displayOnly||e.push(n)}),e},this.updateSubscriptionFields=function(){a&&(t.subscriptionAmountType.on("change",function(){var i=t.subscriptionAmountType.filter(":checked").val(),n=(r(e).find(".pronamic-pay-gf-subscription-amount-settings").hide(),""===i?t.subscriptionAmountType.parents("tr").siblings().hide():(t.subscriptionAmountType.parents("tr").siblings().show(),(n=t.subscriptionAmountType.parents("table").find("tr")).removeClass("even"),n.filter(":visible:even").addClass("even")),r(e).find(".pronamic-pay-gf-subscription-amount-settings.amount-"+i));0<n.length&&n.show()}),t.subscriptionAmountType.trigger("change"),t.subscriptionIntervalType.on("change",function(){var i=t.subscriptionIntervalType.filter(":checked").val(),n=(r(e).find(".pronamic-pay-gf-subscription-interval-settings").hide(),r(e).find(".pronamic-pay-gf-subscription-interval-settings.interval-"+i));"fixed"!==i&&(t.subscriptionIntervalPeriod.val("D"),t.subscriptionIntervalPeriod.trigger("change")),0<n.length&&n.show()}),t.subscriptionIntervalDateType.on("change",function(){var i=t.subscriptionIntervalDateType.filter(":checked").val(),i=(r(e).find(".pronamic-pay-gf-subscription-interval-date-settings").hide(),r(e).find(".pronamic-pay-gf-subscription-interval-date-settings.interval-date-"+i));0<i.length&&i.show()}),t.subscriptionIntervalPeriod.on("change",function(){var i=t.subscriptionIntervalPeriod.val();switch(r(e).find(".pronamic-pay-gf-subscription-interval-date-sync-settings").hide(),r(e).find(".pronamic-pay-gf-subscription-interval-date-sync-settings.interval-"+i).show(),i){case"D":t.subscriptionIntervalDateType.filter('[value="payment_date"]').prop("checked",!0),t.subscriptionIntervalDateType.attr("disabled","disabled"),t.subscriptionIntervalDate.val(""),t.subscriptionIntervalDateDay.val(""),t.subscriptionIntervalDateMonth.val("");break;case"W":t.subscriptionIntervalDateType.removeAttr("disabled"),t.subscriptionIntervalDate.val(""),t.subscriptionIntervalDateMonth.val("");break;case"M":t.subscriptionIntervalDateType.removeAttr("disabled"),t.subscriptionIntervalDateDay.val(""),t.subscriptionIntervalDateMonth.val("");break;case"Y":t.subscriptionIntervalDateType.removeAttr("disabled"),t.subscriptionIntervalDateDay.val("")}t.subscriptionIntervalDateType.trigger("change")}),r(e).find("select.pronamic-pay-gf-subscription-interval-date-sync-settings").on("change",function(){t.subscriptionIntervalDateType.filter('[value="sync"]').prop("checked",!0),t.subscriptionIntervalDateType.trigger("change")}),t.subscriptionIntervalType.trigger("change"),t.subscriptionIntervalPeriod.trigger("change"),t.subscriptionFrequencyType.on("change",function(){var i=t.subscriptionFrequencyType.filter(":checked").val(),i=(r(e).find(".pronamic-pay-gf-subscription-frequency-settings").hide(),r(e).find(".pronamic-pay-gf-subscription-frequency-settings.frequency-"+i));0<i.length&&i.show()}),t.subscriptionFrequencyType.trigger("change"),t.subscriptionTrialEnabled.on("change",function(){var i=0<t.subscriptionTrialEnabled.filter(":checked").length,n=r(e).find(".pronamic-pay-gf-subscription-trial-settings");i?n.show():n.hide()}),t.subscriptionTrialEnabled.trigger("change"))},this.updateFields=function(){i.updateSubscriptionFields()},i.updateFields()}r.fn.gravityFormsPayFeedEditor=function(){return this.each(function(){var i,n=r(this);n.data("gf-pay-feed-editor")||(i=new e(this),n.data("gf-pay-feed-editor",i))})},r(document).ready(function(){r(".gforms_edit_form .ideal-edit-link").click(function(i){i.stopPropagation()}),r("#gf-pay-feed-editor").gravityFormsPayFeedEditor(),"undefined"!=typeof gform&&"undefined"!=typeof form&&(gform.addAction("gform_load_field_choices",function(i){var n,i=i.shift();i&&(n="pronamic_pay_payment_method_selector"===i.type,r('label[for="field_choice_values_enabled"]').parent("div").toggle(!n),n&&r.each(i.choices,function(i,n){n.builtin&&((n=r(".field-choice-input.field-choice-value").eq(i)).attr("disabled","disabled"),n.parent("li").find(".gf_delete_field_choice").remove())}))}),gform.addFilter("gform_has_conditional_logic_dependency",function(i,n){return"undefined"!=typeof form&&-1!==r.inArray(n.toString(),form.pronamic_pay_condition_field_ids)||i})),r(document).on("gform_load_field_settings",function(i,e){r.each({pronamic_pay_config_field:"pronamicPayConfigId",pronamic_pay_display_field:"pronamicPayDisplayMode"},function(i,n){i=r("#"+i);0<i.find('option[value="'+e[n]+'"]').length?i.val(e[n]):SetFieldProperty(n,"")})})})}(jQuery);
//# sourceMappingURL=admin.min.js.map